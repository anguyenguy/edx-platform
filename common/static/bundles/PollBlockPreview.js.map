{"version":3,"sources":["webpack:///./common/lib/xmodule/xmodule/js/src/poll/poll_main.js","webpack:///./common/static/xmodule/modules/js/001-3918b2d4f383c04fed8227cc9f523d6e.js?79f9","webpack:///./common/static/xmodule/modules/js/002-8b615179a51250c4dc203f1daa97be63.js","webpack:///./common/static/xmodule/modules/js/003-b0b94fcb795e61452b7175b797fb5fb2.js"],"names":["HtmlUtils","PollMain","prototype","showAnswerGraph","poll_answers","total","_this","totalValue","parseFloat","isFinite","$","each","index","value","numValue","percentValue","answersObj","statsEl","show","numberEl","html","HTML","toFixed","toString","percentEl","css","width","submitAnswer","answer","answerObj","questionAnswered","console","log","buttonEl","addClass","postWithPrefix","ajax_url","response","canReset","resetButton","wrapperSectionEl","find","window","Conditional","runtime","id","replace","submitReset","hasOwnProperty","status","toLowerCase","questionEl","removeClass","hide","postInit","jsonConfig","poll_answer","length","answers","append","joinHtml","attr","data","questionHtmlMarkup","question","text","shortVersion","el","textEl","barEl","jQuery","appendTo","on","reset","tempEl","c1","tagName","parent","JSON","parse","children","stringify","err","message","JavascriptLoader","executeModuleScripts","callback","callbackCalled","completed","completionHandlerGenerator","loaded","placeholders","i","ref","results","push","allComplete","flag","len","undefined","placeholder","s","src","document","createElement","setAttribute","onload","appendChild","remove","call","define","Poll"],"mappings":"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","file":"PollBlockPreview.js","sourcesContent":["\n    define('PollMain', ['edx-ui-toolkit/js/utils/html-utils'], function(HtmlUtils) {\n        PollMain.prototype = {\n\n            showAnswerGraph: function(poll_answers, total) {\n                var _this, totalValue;\n\n                totalValue = parseFloat(total);\n                if (isFinite(totalValue) === false) {\n                    return;\n                }\n\n                _this = this;\n\n                $.each(poll_answers, function(index, value) {\n                    var numValue, percentValue;\n\n                    numValue = parseFloat(value);\n                    if (isFinite(numValue) === false) {\n                        return;\n                    }\n\n                    percentValue = (numValue / totalValue) * 100.0;\n\n                    _this.answersObj[index].statsEl.show();\n                    // eslint-disable-next-line max-len\n                    _this.answersObj[index].numberEl.html(HtmlUtils.HTML('' + value + ' (' + percentValue.toFixed(1) + '%)').toString());\n                    _this.answersObj[index].percentEl.css({\n                        width: '' + percentValue.toFixed(1) + '%'\n                    });\n                });\n            },\n\n            submitAnswer: function(answer, answerObj) {\n                var _this;\n\n    // Make sure that the user can answer a question only once.\n                if (this.questionAnswered === true) {\n                    return;\n                }\n                this.questionAnswered = true;\n\n                _this = this;\n\n                console.log('submit answer');\n\n                answerObj.buttonEl.addClass('answered');\n\n    // Send the data to the server as an AJAX request. Attach a callback that will\n    // be fired on server's response.\n                $.postWithPrefix(\n        _this.ajax_url + '/' + answer, {},\n        function(response) {\n            console.log('success! response = ');\n            console.log(response);\n\n            _this.showAnswerGraph(response.poll_answers, response.total);\n\n            if (_this.canReset === true) {\n                _this.resetButton.show();\n            }\n\n            // Initialize Conditional constructors.\n            if (_this.wrapperSectionEl !== null) {\n                $(_this.wrapperSectionEl).find('.xmodule_ConditionalModule').each(function(index, value) {\n                    // eslint-disable-next-line no-new\n                    new window.Conditional(value, _this.runtime, _this.id.replace(/^poll_/, ''));\n                });\n            }\n        }\n    );\n            }, // End-of: 'submitAnswer': function (answer, answerEl) {\n\n\n            submitReset: function() {\n                var _this;\n\n                _this = this;\n\n                console.log('submit reset');\n\n    // Send the data to the server as an AJAX request. Attach a callback that will\n    // be fired on server's response.\n                $.postWithPrefix(\n        this.ajax_url + '/' + 'reset_poll',\n        {},\n        function(response) {\n            console.log('success! response = ');\n            console.log(response);\n\n            if (\n                (response.hasOwnProperty('status') !== true) ||\n                (typeof response.status !== 'string') ||\n                (response.status.toLowerCase() !== 'success')) {\n                return;\n            }\n\n            _this.questionAnswered = false;\n            _this.questionEl.find('.button.answered').removeClass('answered');\n            _this.questionEl.find('.stats').hide();\n            _this.resetButton.hide();\n\n            // Initialize Conditional constructors. We will specify the third parameter as 'true'\n            // notifying the constructor that this is a reset operation.\n            if (_this.wrapperSectionEl !== null) {\n                $(_this.wrapperSectionEl).find('.xmodule_ConditionalModule').each(function(index, value) {\n                    // eslint-disable-next-line no-new\n                    new window.Conditional(value, _this.runtime, _this.id.replace(/^poll_/, ''));\n                });\n            }\n        }\n    );\n            }, // End-of: 'submitAnswer': function (answer, answerEl) {\n\n            postInit: function() {\n                var _this;\n\n    // Access this object inside inner functions.\n                _this = this;\n\n                if (\n        (this.jsonConfig.poll_answer.length > 0) &&\n        (this.jsonConfig.answers.hasOwnProperty(this.jsonConfig.poll_answer) === false)\n    ) {\n                    HtmlUtils.append(this.questionEl, HtmlUtils.joinHtml(\n                        HtmlUtils.HTML('<h3>Error!</h3>'),\n                        HtmlUtils.HTML(\n                          '<p>XML data format changed. List of answers was modified, but poll data was not updated.</p>'\n                        )\n                    ));\n\n                    return;\n                }\n\n    // Get the DOM id of the question.\n                this.id = this.questionEl.attr('id');\n\n    // Get the URL to which we will post the users answer to the question.\n                this.ajax_url = this.questionEl.data('ajax-url');\n\n                this.questionHtmlMarkup = $('<div />').html(HtmlUtils.HTML(this.jsonConfig.question).toString()).text();\n                this.questionEl.append(HtmlUtils.HTML(this.questionHtmlMarkup).toString());\n\n    // When the user selects and answer, we will set this flag to true.\n                this.questionAnswered = false;\n\n                this.answersObj = {};\n                this.shortVersion = true;\n\n                $.each(this.jsonConfig.answers, function(index, value) {\n                    if (value.length >= 18) {\n                        _this.shortVersion = false;\n                    }\n                });\n\n                $.each(this.jsonConfig.answers, function(index, value) {\n                    var answer;\n\n                    answer = {};\n\n                    _this.answersObj[index] = answer;\n\n                    answer.el = $('<div class=\"poll_answer\"></div>');\n\n                    answer.questionEl = $('<div class=\"question\"></div>');\n                    answer.buttonEl = $('<div class=\"button\"></div>');\n                    answer.textEl = $('<div class=\"text\"></div>');\n                    answer.questionEl.append(HtmlUtils.HTML(answer.buttonEl).toString());\n                    answer.questionEl.append(HtmlUtils.HTML(answer.textEl).toString());\n\n                    answer.el.append(HtmlUtils.HTML(answer.questionEl).toString());\n\n                    answer.statsEl = $('<div class=\"stats\"></div>');\n                    answer.barEl = $('<div class=\"bar\"></div>');\n                    answer.percentEl = $('<div class=\"percent\"></div>');\n                    answer.barEl.append(HtmlUtils.HTML(answer.percentEl).toString());\n                    answer.numberEl = $('<div class=\"number\"></div>');\n                    answer.statsEl.append(HtmlUtils.HTML(answer.barEl).toString());\n                    answer.statsEl.append(HtmlUtils.HTML(answer.numberEl).toString());\n\n                    answer.statsEl.hide();\n\n                    answer.el.append(HtmlUtils.HTML(answer.statsEl).toString());\n\n                    answer.textEl.html(HtmlUtils.HTML(value).toString());\n\n                    if (_this.shortVersion === true) {\n                        $.each(answer, function(index, value) {\n                            if (value instanceof jQuery) {\n                                value.addClass('short');\n                            }\n                        });\n                    }\n\n                    answer.el.appendTo(_this.questionEl);\n\n                    answer.textEl.on('click', function() {\n                        _this.submitAnswer(index, answer);\n                    });\n\n                    answer.buttonEl.on('click', function() {\n                        _this.submitAnswer(index, answer);\n                    });\n\n                    if (index === _this.jsonConfig.poll_answer) {\n                        answer.buttonEl.addClass('answered');\n                        _this.questionAnswered = true;\n                    }\n                });\n\n                console.log(this.jsonConfig.reset);\n\n                if ((typeof this.jsonConfig.reset === 'string') && (this.jsonConfig.reset.toLowerCase() === 'true')) {\n                    this.canReset = true;\n\n                    this.resetButton = $('<div class=\"button reset-button\">Change your vote</div>');\n\n                    if (this.questionAnswered === false) {\n                        this.resetButton.hide();\n                    }\n\n                    HtmlUtils.append(this.questionEl, this.resetButton);\n                    this.resetButton.on('click', function() {\n                        _this.submitReset();\n                    });\n                } else {\n                    this.canReset = false;\n                }\n\n    // If it turns out that the user already answered the question, show the answers graph.\n                if (this.questionAnswered === true) {\n                    this.showAnswerGraph(this.jsonConfig.poll_answers, this.jsonConfig.total);\n                }\n            } // End-of: 'postInit': function () {\n        }; // End-of: PollMain.prototype = {\n\n        return PollMain;\n\n        function PollMain(el, runtime) {\n            var _this;\n\n            this.runtime = runtime;\n            this.questionEl = $(el).find('.poll_question');\n            if (this.questionEl.length !== 1) {\n        // We require one question DOM element.\n                console.log('ERROR: PollMain constructor requires one question DOM element.');\n\n                return;\n            }\n\n    // Just a safety precussion. If we run this code more than once, multiple 'click' callback handlers will be\n    // attached to the same DOM elements. We don't want this to happen.\n            if (this.questionEl.attr('poll_main_processed') === 'true') {\n                console.log(\n            'ERROR: PolMain JS constructor was called on a DOM element that has already been processed once.'\n        );\n\n                return;\n            }\n\n    // This element was not processed earlier.\n    // Make sure that next time we will not process this element a second time.\n            this.questionEl.attr('poll_main_processed', 'true');\n\n    // Access this object inside inner functions.\n            _this = this;\n\n    // DOM element which contains the current poll along with any conditionals. By default we assume that such\n    // element is not present. We will try to find it.\n            this.wrapperSectionEl = null;\n\n            (function(tempEl, c1) {\n                while (tempEl.tagName.toLowerCase() !== 'body') {\n                    tempEl = $(tempEl).parent()[0];\n                    c1 += 1;\n\n                    if (\n                (tempEl.tagName.toLowerCase() === 'div') &&\n                ($(tempEl).data('block-type') === 'wrapper')\n            ) {\n                        _this.wrapperSectionEl = tempEl;\n\n                        break;\n                    } else if (c1 > 50) {\n                // In case something breaks, and we enter an endless loop, a sane\n                // limit for loop iterations.\n\n                        break;\n                    }\n                }\n            }($(el)[0], 0));\n\n            try {\n                this.jsonConfig = JSON.parse(this.questionEl.children('.poll_question_div').html());\n\n                $.postWithPrefix(\n            '' + this.questionEl.data('ajax-url') + '/' + 'get_state', {},\n            function(response) {\n                _this.jsonConfig.poll_answer = response.poll_answer;\n                _this.jsonConfig.total = response.total;\n\n                $.each(response.poll_answers, function(index, value) {\n                    _this.jsonConfig.poll_answers[index] = value;\n                });\n\n                // xss-lint: disable=javascript-jquery-html\n                _this.questionEl.children('.poll_question_div').html(JSON.stringify(_this.jsonConfig));\n\n                _this.postInit();\n            }\n        );\n\n                return;\n            } catch (err) {\n                console.log(\n            'ERROR: Invalid JSON config for poll ID \"' + this.id + '\".',\n            'Error messsage: \"' + err.message + '\".'\n        );\n\n                return;\n            }\n        } // End-of: function PollMain(el) {\n    }); // End-of: define('PollMain', [], function () {\n\n// End-of: (function (requirejs, require, define) {\n\n\n\n\n// WEBPACK FOOTER //\n// ./common/lib/xmodule/xmodule/js/src/poll/poll_main.js","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function() {\n    'use strict';\n    this.JavascriptLoader = (function() {\n        function JavascriptLoader() {\n        }\n\n        /**\n         * Set of library functions that provide common interface for javascript loading\n         * for all module types. All functionality provided by JavascriptLoader should take\n         * place at module scope, i.e. don't run jQuery over entire page.\n         *\n         * executeModuleScripts:\n         *     Scan the module ('el') for \"script_placeholder\"s, then:\n         *\n         *     1) Fetch each script from server\n         *     2) Explicitly attach the script to the <head> of document\n         *     3) Explicitly wait for each script to be loaded\n         *     4) Return to callback function when all scripts loaded\n         */\n        JavascriptLoader.executeModuleScripts = function(el, callback) {\n            var callbackCalled, completed, completionHandlerGenerator, loaded, placeholders;\n            if (!callback) {\n                callback = null; // eslint-disable-line no-param-reassign\n            }\n            placeholders = el.find('.script_placeholder');\n            if (placeholders.length === 0) {\n                if (callback !== null) {\n                    callback();\n                }\n                return [];\n            }\n            // TODO: Verify the execution order of multiple placeholders\n            completed = (function() {\n                var i, ref, results;\n                results = [];\n                for (i = 1, ref = placeholders.length; ref >= 1 ? i <= ref : i >= ref; ref >= 1 ? ++i : --i) {\n                    results.push(false);\n                }\n                return results;\n            }());\n            callbackCalled = false;\n            completionHandlerGenerator = function(index) {\n                return function() {\n                    var allComplete, flag, i, len;\n                    allComplete = true;\n                    completed[index] = true;\n                    for (i = 0, len = completed.length; i < len; i++) {\n                        flag = completed[i];\n                        if (!flag) {\n                            allComplete = false;\n                            break;\n                        }\n                    }\n                    if (allComplete && !callbackCalled) {\n                        callbackCalled = true;\n                        if (callback !== null) {\n                            return callback();\n                        }\n                    }\n                    return undefined;\n                };\n            };\n            // Keep a map of what sources we're loaded from, and don't do it twice.\n            loaded = {};\n            return placeholders.each(function(index, placeholder) {\n                var s, src;\n                // TODO: Check if the script already exists in DOM. If so, (1) copy it\n                // into memory; (2) delete the DOM script element; (3) reappend it.\n                // This would prevent memory bloat and save a network request.\n                src = $(placeholder).attr('data-src');\n                if (!(src in loaded)) {\n                    loaded[src] = true;\n                    s = document.createElement('script');\n                    s.setAttribute('src', src);\n                    s.setAttribute('type', 'text/javascript');\n                    s.onload = completionHandlerGenerator(index);\n                    // Need to use the DOM elements directly or the scripts won't execute properly.\n                    $('head')[0].appendChild(s);\n                } else {\n                    // just call the completion callback directly, without reloading the file\n                    completionHandlerGenerator(index)();\n                }\n                return $(placeholder).remove();\n            });\n        };\n\n        return JavascriptLoader;\n    }());\n}).call(this);\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/001-3918b2d4f383c04fed8227cc9f523d6e.js","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\ndefine(['poll/poll_main.js'], function(PollMain) {\n    'use strict';\n\n    function Poll(el) {\n        return new PollMain(el);\n    }\n\n    window.Poll = Poll;\n\n    return Poll;\n});\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/002-8b615179a51250c4dc203f1daa97be63.js","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n\n    define('PollMain', ['edx-ui-toolkit/js/utils/html-utils'], function(HtmlUtils) {\n        PollMain.prototype = {\n\n            showAnswerGraph: function(poll_answers, total) {\n                var _this, totalValue;\n\n                totalValue = parseFloat(total);\n                if (isFinite(totalValue) === false) {\n                    return;\n                }\n\n                _this = this;\n\n                $.each(poll_answers, function(index, value) {\n                    var numValue, percentValue;\n\n                    numValue = parseFloat(value);\n                    if (isFinite(numValue) === false) {\n                        return;\n                    }\n\n                    percentValue = (numValue / totalValue) * 100.0;\n\n                    _this.answersObj[index].statsEl.show();\n                    // eslint-disable-next-line max-len\n                    _this.answersObj[index].numberEl.html(HtmlUtils.HTML('' + value + ' (' + percentValue.toFixed(1) + '%)').toString());\n                    _this.answersObj[index].percentEl.css({\n                        width: '' + percentValue.toFixed(1) + '%'\n                    });\n                });\n            },\n\n            submitAnswer: function(answer, answerObj) {\n                var _this;\n\n    // Make sure that the user can answer a question only once.\n                if (this.questionAnswered === true) {\n                    return;\n                }\n                this.questionAnswered = true;\n\n                _this = this;\n\n                console.log('submit answer');\n\n                answerObj.buttonEl.addClass('answered');\n\n    // Send the data to the server as an AJAX request. Attach a callback that will\n    // be fired on server's response.\n                $.postWithPrefix(\n        _this.ajax_url + '/' + answer, {},\n        function(response) {\n            console.log('success! response = ');\n            console.log(response);\n\n            _this.showAnswerGraph(response.poll_answers, response.total);\n\n            if (_this.canReset === true) {\n                _this.resetButton.show();\n            }\n\n            // Initialize Conditional constructors.\n            if (_this.wrapperSectionEl !== null) {\n                $(_this.wrapperSectionEl).find('.xmodule_ConditionalModule').each(function(index, value) {\n                    // eslint-disable-next-line no-new\n                    new window.Conditional(value, _this.runtime, _this.id.replace(/^poll_/, ''));\n                });\n            }\n        }\n    );\n            }, // End-of: 'submitAnswer': function (answer, answerEl) {\n\n\n            submitReset: function() {\n                var _this;\n\n                _this = this;\n\n                console.log('submit reset');\n\n    // Send the data to the server as an AJAX request. Attach a callback that will\n    // be fired on server's response.\n                $.postWithPrefix(\n        this.ajax_url + '/' + 'reset_poll',\n        {},\n        function(response) {\n            console.log('success! response = ');\n            console.log(response);\n\n            if (\n                (response.hasOwnProperty('status') !== true) ||\n                (typeof response.status !== 'string') ||\n                (response.status.toLowerCase() !== 'success')) {\n                return;\n            }\n\n            _this.questionAnswered = false;\n            _this.questionEl.find('.button.answered').removeClass('answered');\n            _this.questionEl.find('.stats').hide();\n            _this.resetButton.hide();\n\n            // Initialize Conditional constructors. We will specify the third parameter as 'true'\n            // notifying the constructor that this is a reset operation.\n            if (_this.wrapperSectionEl !== null) {\n                $(_this.wrapperSectionEl).find('.xmodule_ConditionalModule').each(function(index, value) {\n                    // eslint-disable-next-line no-new\n                    new window.Conditional(value, _this.runtime, _this.id.replace(/^poll_/, ''));\n                });\n            }\n        }\n    );\n            }, // End-of: 'submitAnswer': function (answer, answerEl) {\n\n            postInit: function() {\n                var _this;\n\n    // Access this object inside inner functions.\n                _this = this;\n\n                if (\n        (this.jsonConfig.poll_answer.length > 0) &&\n        (this.jsonConfig.answers.hasOwnProperty(this.jsonConfig.poll_answer) === false)\n    ) {\n                    HtmlUtils.append(this.questionEl, HtmlUtils.joinHtml(\n                        HtmlUtils.HTML('<h3>Error!</h3>'),\n                        HtmlUtils.HTML(\n                          '<p>XML data format changed. List of answers was modified, but poll data was not updated.</p>'\n                        )\n                    ));\n\n                    return;\n                }\n\n    // Get the DOM id of the question.\n                this.id = this.questionEl.attr('id');\n\n    // Get the URL to which we will post the users answer to the question.\n                this.ajax_url = this.questionEl.data('ajax-url');\n\n                this.questionHtmlMarkup = $('<div />').html(HtmlUtils.HTML(this.jsonConfig.question).toString()).text();\n                this.questionEl.append(HtmlUtils.HTML(this.questionHtmlMarkup).toString());\n\n    // When the user selects and answer, we will set this flag to true.\n                this.questionAnswered = false;\n\n                this.answersObj = {};\n                this.shortVersion = true;\n\n                $.each(this.jsonConfig.answers, function(index, value) {\n                    if (value.length >= 18) {\n                        _this.shortVersion = false;\n                    }\n                });\n\n                $.each(this.jsonConfig.answers, function(index, value) {\n                    var answer;\n\n                    answer = {};\n\n                    _this.answersObj[index] = answer;\n\n                    answer.el = $('<div class=\"poll_answer\"></div>');\n\n                    answer.questionEl = $('<div class=\"question\"></div>');\n                    answer.buttonEl = $('<div class=\"button\"></div>');\n                    answer.textEl = $('<div class=\"text\"></div>');\n                    answer.questionEl.append(HtmlUtils.HTML(answer.buttonEl).toString());\n                    answer.questionEl.append(HtmlUtils.HTML(answer.textEl).toString());\n\n                    answer.el.append(HtmlUtils.HTML(answer.questionEl).toString());\n\n                    answer.statsEl = $('<div class=\"stats\"></div>');\n                    answer.barEl = $('<div class=\"bar\"></div>');\n                    answer.percentEl = $('<div class=\"percent\"></div>');\n                    answer.barEl.append(HtmlUtils.HTML(answer.percentEl).toString());\n                    answer.numberEl = $('<div class=\"number\"></div>');\n                    answer.statsEl.append(HtmlUtils.HTML(answer.barEl).toString());\n                    answer.statsEl.append(HtmlUtils.HTML(answer.numberEl).toString());\n\n                    answer.statsEl.hide();\n\n                    answer.el.append(HtmlUtils.HTML(answer.statsEl).toString());\n\n                    answer.textEl.html(HtmlUtils.HTML(value).toString());\n\n                    if (_this.shortVersion === true) {\n                        $.each(answer, function(index, value) {\n                            if (value instanceof jQuery) {\n                                value.addClass('short');\n                            }\n                        });\n                    }\n\n                    answer.el.appendTo(_this.questionEl);\n\n                    answer.textEl.on('click', function() {\n                        _this.submitAnswer(index, answer);\n                    });\n\n                    answer.buttonEl.on('click', function() {\n                        _this.submitAnswer(index, answer);\n                    });\n\n                    if (index === _this.jsonConfig.poll_answer) {\n                        answer.buttonEl.addClass('answered');\n                        _this.questionAnswered = true;\n                    }\n                });\n\n                console.log(this.jsonConfig.reset);\n\n                if ((typeof this.jsonConfig.reset === 'string') && (this.jsonConfig.reset.toLowerCase() === 'true')) {\n                    this.canReset = true;\n\n                    this.resetButton = $('<div class=\"button reset-button\">Change your vote</div>');\n\n                    if (this.questionAnswered === false) {\n                        this.resetButton.hide();\n                    }\n\n                    HtmlUtils.append(this.questionEl, this.resetButton);\n                    this.resetButton.on('click', function() {\n                        _this.submitReset();\n                    });\n                } else {\n                    this.canReset = false;\n                }\n\n    // If it turns out that the user already answered the question, show the answers graph.\n                if (this.questionAnswered === true) {\n                    this.showAnswerGraph(this.jsonConfig.poll_answers, this.jsonConfig.total);\n                }\n            } // End-of: 'postInit': function () {\n        }; // End-of: PollMain.prototype = {\n\n        return PollMain;\n\n        function PollMain(el, runtime) {\n            var _this;\n\n            this.runtime = runtime;\n            this.questionEl = $(el).find('.poll_question');\n            if (this.questionEl.length !== 1) {\n        // We require one question DOM element.\n                console.log('ERROR: PollMain constructor requires one question DOM element.');\n\n                return;\n            }\n\n    // Just a safety precussion. If we run this code more than once, multiple 'click' callback handlers will be\n    // attached to the same DOM elements. We don't want this to happen.\n            if (this.questionEl.attr('poll_main_processed') === 'true') {\n                console.log(\n            'ERROR: PolMain JS constructor was called on a DOM element that has already been processed once.'\n        );\n\n                return;\n            }\n\n    // This element was not processed earlier.\n    // Make sure that next time we will not process this element a second time.\n            this.questionEl.attr('poll_main_processed', 'true');\n\n    // Access this object inside inner functions.\n            _this = this;\n\n    // DOM element which contains the current poll along with any conditionals. By default we assume that such\n    // element is not present. We will try to find it.\n            this.wrapperSectionEl = null;\n\n            (function(tempEl, c1) {\n                while (tempEl.tagName.toLowerCase() !== 'body') {\n                    tempEl = $(tempEl).parent()[0];\n                    c1 += 1;\n\n                    if (\n                (tempEl.tagName.toLowerCase() === 'div') &&\n                ($(tempEl).data('block-type') === 'wrapper')\n            ) {\n                        _this.wrapperSectionEl = tempEl;\n\n                        break;\n                    } else if (c1 > 50) {\n                // In case something breaks, and we enter an endless loop, a sane\n                // limit for loop iterations.\n\n                        break;\n                    }\n                }\n            }($(el)[0], 0));\n\n            try {\n                this.jsonConfig = JSON.parse(this.questionEl.children('.poll_question_div').html());\n\n                $.postWithPrefix(\n            '' + this.questionEl.data('ajax-url') + '/' + 'get_state', {},\n            function(response) {\n                _this.jsonConfig.poll_answer = response.poll_answer;\n                _this.jsonConfig.total = response.total;\n\n                $.each(response.poll_answers, function(index, value) {\n                    _this.jsonConfig.poll_answers[index] = value;\n                });\n\n                // xss-lint: disable=javascript-jquery-html\n                _this.questionEl.children('.poll_question_div').html(JSON.stringify(_this.jsonConfig));\n\n                _this.postInit();\n            }\n        );\n\n                return;\n            } catch (err) {\n                console.log(\n            'ERROR: Invalid JSON config for poll ID \"' + this.id + '\".',\n            'Error messsage: \"' + err.message + '\".'\n        );\n\n                return;\n            }\n        } // End-of: function PollMain(el) {\n    }); // End-of: define('PollMain', [], function () {\n\n// End-of: (function (requirejs, require, define) {\n\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/003-b0b94fcb795e61452b7175b797fb5fb2.js"],"sourceRoot":""}